const themeToggle=document.querySelector(".theme-toggle"),prefersDarkScheme=window.matchMedia("(prefers-color-scheme: dark)");document.documentElement.setAttribute("data-theme",prefersDarkScheme.matches?"dark":"light"),themeToggle.addEventListener("click",(()=>{const t="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";document.documentElement.setAttribute("data-theme",t)}));const tabButtons=document.querySelectorAll(".tab-button"),tabContents=document.querySelectorAll(".tab-content");let currentJSON={};const activateTab=t=>{tabContents.forEach((t=>t.classList.remove("active"))),tabButtons.forEach((t=>t.classList.remove("active"))),document.getElementById(t).classList.add("active"),document.querySelector(`[data-tab="${t}"]`).classList.add("active")};tabButtons.forEach((t=>{t.addEventListener("click",(t=>{activateTab(t.target.dataset.tab)}))}));const copyToClipboard=async(t,e)=>{try{await navigator.clipboard.writeText(t);const n=e.textContent;e.textContent="Copied!",e.style.backgroundColor="var(--success-color)",setTimeout((()=>{e.textContent=n,e.style.backgroundColor=""}),2e3)}catch(t){alert("Failed to copy to clipboard")}};document.getElementById("convertToJsonBtn").addEventListener("click",(()=>{const t=document.getElementById("markdownInput").value.trim(),e=document.getElementById("jsonOutput"),n=document.getElementById("selectJsonBtn");if(!t)return e.textContent="Please paste a Markdown table.",void(n.style.display="none");try{const o=t.split("\n").map((t=>t.trim()));if(o.length<2)throw new Error("Invalid Markdown table");const[c,...a]=o,r=c.split("|").map((t=>t.trim())).filter(Boolean).map((t=>t.replace(/\*\*/g,""))),s={};a.forEach((t=>{if(t.startsWith("|")&&!t.includes("-")){const e=t.split("|").map((t=>t.trim())).filter(Boolean).map((t=>t.replace(/\*\*/g,"")));if(e.length>0){const t=e[0];s[t]={};for(let n=1;n<e.length;n++)s[t][r[n]]="yes"===e[n].toLowerCase()?"yes":"no"}}})),currentJSON=s,e.textContent=JSON.stringify(s,null,2),n.style.display="block"}catch(t){e.textContent=`Error: ${t.message}`,n.style.display="none"}})),document.getElementById("updateJsonBtn").addEventListener("click",(()=>{const t=document.getElementById("existingJsonInput").value.trim(),e=document.getElementById("newProviderName").value.trim(),n=document.getElementById("supportedServices").value.trim(),o=document.getElementById("updatedJsonOutput"),c=document.getElementById("selectUpdatedJsonBtn");if(!e||!n)return o.textContent="Please enter both provider name and supported services.",void(c.style.display="none");function a(t){return t.toLowerCase().trim()}try{let r=t?JSON.parse(t):currentJSON;if(0===Object.keys(r).length)throw new Error("No valid JSON data provided");const s=n.split(",").map((t=>a(t))),d={};Object.entries(r).forEach((([t,e])=>{const n=a(t);d[n]=e})),Object.keys(d).forEach((t=>{d[t][e]=s.includes(a(t))?"yes":"no"})),s.forEach((t=>{if(!Object.keys(d).some((e=>a(e)===t))){d[t]={};const n=Object.keys(d)[0];Object.keys(d[n]).forEach((e=>{d[t][e]="no"})),d[t][e]="yes"}}));const l={};Object.entries(d).forEach((([t,e])=>{l[function(t){const e=t.match(/[a-zA-Z]/);if(!e)return t;const n=e.index;return t.slice(0,n)+t[n].toUpperCase()+t.slice(n+1)}(t)]=e})),currentJSON=l,o.textContent=JSON.stringify(l,null,2),c.style.display="block"}catch(t){o.textContent=`Error: ${t.message}`,c.style.display="none"}})),document.getElementById("convertToMarkdownBtn").addEventListener("click",(()=>{const t=document.getElementById("inputJsonForMarkdown").value.trim(),e=document.getElementById("markdownOutput"),n=document.getElementById("selectMarkdownBtn");try{let o=t?JSON.parse(t):currentJSON;if(0===Object.keys(o).length)throw new Error("No valid JSON data provided");const c=Object.keys(o),a=Object.keys(o[c[0]]);let r=[`| **Service Name** | ${a.map((t=>`**${t}**`)).join(" | ")} |`,`| ${"-".repeat(15)} | ${a.map((()=>"-".repeat(15))).join(" | ")} |`,...c.map((t=>`| **${t}** | ${a.map((e=>(o[t][e]||"no").charAt(0).toUpperCase()+(o[t][e]||"no").slice(1))).join(" | ")} |`))].join("\n");e.textContent=r,n.style.display="block"}catch(t){e.textContent=`Error: ${t.message}`,n.style.display="none"}})),document.getElementById("selectJsonBtn").addEventListener("click",(()=>{copyToClipboard(document.getElementById("jsonOutput").textContent,document.getElementById("selectJsonBtn"))})),document.getElementById("selectUpdatedJsonBtn").addEventListener("click",(()=>{copyToClipboard(document.getElementById("updatedJsonOutput").textContent,document.getElementById("selectUpdatedJsonBtn"))})),document.getElementById("selectMarkdownBtn").addEventListener("click",(()=>{copyToClipboard(document.getElementById("markdownOutput").textContent,document.getElementById("selectMarkdownBtn"))})),activateTab("markdownToJson");