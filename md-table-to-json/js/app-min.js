const themeToggle=document.querySelector(".theme-toggle"),prefersDarkScheme=window.matchMedia("(prefers-color-scheme: dark)");document.documentElement.setAttribute("data-theme",prefersDarkScheme.matches?"dark":"light"),themeToggle.addEventListener("click",(()=>{const t="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";document.documentElement.setAttribute("data-theme",t)}));const tabButtons=document.querySelectorAll(".tab-button"),tabContents=document.querySelectorAll(".tab-content");let currentJSON={};const activateTab=t=>{tabContents.forEach((t=>t.classList.remove("active"))),tabButtons.forEach((t=>t.classList.remove("active"))),document.getElementById(t).classList.add("active"),document.querySelector(`[data-tab="${t}"]`).classList.add("active")};tabButtons.forEach((t=>{t.addEventListener("click",(t=>{activateTab(t.target.dataset.tab)}))}));const copyToClipboard=async(t,e)=>{try{await navigator.clipboard.writeText(t);const n=e.textContent;e.textContent="Copied!",e.style.backgroundColor="var(--success-color)",setTimeout((()=>{e.textContent=n,e.style.backgroundColor=""}),2e3)}catch(t){alert("Failed to copy to clipboard")}};document.getElementById("convertToJsonBtn").addEventListener("click",(()=>{const t=document.getElementById("markdownInput").value.trim(),e=document.getElementById("jsonOutput"),n=document.getElementById("selectJsonBtn");if(!t)return e.textContent="Please paste a Markdown table.",void(n.style.display="none");try{const o=t.split("\n").map((t=>t.trim()));if(o.length<2)throw new Error("Invalid Markdown table");const[a,...c]=o,d=a.split("|").map((t=>t.trim())).filter(Boolean).map((t=>t.replace(/\*\*/g,""))),r={};c.forEach((t=>{if(t.startsWith("|")&&!t.includes("-")){const e=t.split("|").map((t=>t.trim())).filter(Boolean).map((t=>t.replace(/\*\*/g,"")));if(e.length>0){const t=e[0];r[t]={};for(let n=1;n<e.length;n++)r[t][d[n]]="yes"===e[n].toLowerCase()?"yes":"no"}}})),currentJSON=r,e.textContent=JSON.stringify(r,null,2),n.style.display="block"}catch(t){e.textContent=`Error: ${t.message}`,n.style.display="none"}})),document.getElementById("updateJsonBtn").addEventListener("click",(()=>{const t=document.getElementById("existingJsonInput").value.trim(),e=document.getElementById("newProviderName").value.trim(),n=document.getElementById("supportedServices").value.trim(),o=document.getElementById("updatedJsonOutput"),a=document.getElementById("selectUpdatedJsonBtn");if(!e||!n)return o.textContent="Please enter both provider name and supported services.",void(a.style.display="none");try{let c=t?JSON.parse(t):currentJSON;if(0===Object.keys(c).length)throw new Error("No valid JSON data provided");const d=n.split(",").map((t=>t.trim())),r={...c};Object.keys(r).forEach((t=>{r[t][e]=d.includes(t)?"yes":"no"})),d.forEach((t=>{if(!r[t]){r[t]={};const n=Object.keys(r)[0];Object.keys(r[n]).forEach((e=>{r[t][e]="no"})),r[t][e]="yes"}})),currentJSON=r,o.textContent=JSON.stringify(r,null,2),a.style.display="block"}catch(t){o.textContent=`Error: ${t.message}`,a.style.display="none"}})),document.getElementById("convertToMarkdownBtn").addEventListener("click",(()=>{const t=document.getElementById("inputJsonForMarkdown").value.trim(),e=document.getElementById("markdownOutput"),n=document.getElementById("selectMarkdownBtn");try{let o=t?JSON.parse(t):currentJSON;if(0===Object.keys(o).length)throw new Error("No valid JSON data provided");const a=Object.keys(o),c=Object.keys(o[a[0]]);let d=[`| **Service Name** | ${c.map((t=>`**${t}**`)).join(" | ")} |`,`| ${"-".repeat(15)} | ${c.map((()=>"-".repeat(15))).join(" | ")} |`,...a.map((t=>`| **${t}** | ${c.map((e=>(o[t][e]||"no").charAt(0).toUpperCase()+(o[t][e]||"no").slice(1))).join(" | ")} |`))].join("\n");e.textContent=d,n.style.display="block"}catch(t){e.textContent=`Error: ${t.message}`,n.style.display="none"}})),document.getElementById("selectJsonBtn").addEventListener("click",(()=>{copyToClipboard(document.getElementById("jsonOutput").textContent,document.getElementById("selectJsonBtn"))})),document.getElementById("selectUpdatedJsonBtn").addEventListener("click",(()=>{copyToClipboard(document.getElementById("updatedJsonOutput").textContent,document.getElementById("selectUpdatedJsonBtn"))})),document.getElementById("selectMarkdownBtn").addEventListener("click",(()=>{copyToClipboard(document.getElementById("markdownOutput").textContent,document.getElementById("selectMarkdownBtn"))})),activateTab("markdownToJson");